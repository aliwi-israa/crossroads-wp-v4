document.querySelectorAll('.services-nav .nav-link[data-toggle="collapse"]').forEach(link=>{link.addEventListener('click',function(e){e.preventDefault();const targetId=this.getAttribute('data-target')||this.getAttribute('href'),target=document.querySelector(targetId),arrowIcon=this.querySelector('.rotate-icon');if(!target)return;const isOpen=target.classList.contains('show');document.querySelectorAll('.services-nav .collapse').forEach(div=>div.classList.remove('show'));document.querySelectorAll('.services-nav .nav-link[aria-expanded]').forEach(l=>{l.setAttribute('aria-expanded','false');const icon=l.querySelector('.rotate-icon');if(icon)icon.classList.remove('rotated');});if(!isOpen){target.classList.add('show');this.setAttribute('aria-expanded','true');if(arrowIcon)arrowIcon.classList.add('rotated');}})});document.addEventListener('DOMContentLoaded',()=>{const url=window.location.href;document.querySelectorAll('.services-nav .collapse .nav-link').forEach(link=>{if(url.includes(link.getAttribute('href'))){const collapseDiv=link.closest('.collapse');if(collapseDiv){collapseDiv.classList.add('show');const toggle=document.querySelector(`[data-target="#${collapseDiv.id}"]`);if(toggle){toggle.setAttribute('aria-expanded','true');toggle.classList.add('active');const icon=toggle.querySelector('.rotate-icon');if(icon)icon.classList.add('rotated');}}}})});document.addEventListener('DOMContentLoaded',()=>{const path=window.location.pathname.replace(/\/+$/,'').toLowerCase();document.querySelectorAll('.services-nav .nav-item').forEach(item=>{const parentLink=item.querySelector('.parent-category');const submenu=item.querySelector('.collapse');const childLinks=submenu?submenu.querySelectorAll('.nav-link'):[];const toggleTarget=parentLink?parentLink.getAttribute('href'):null;let isChildActive=!1;childLinks.forEach(link=>{const href=link.getAttribute('href');if(!href)return;const testPath=new URL(href,window.location.origin).pathname.replace(/\/+$/,'').toLowerCase();if(testPath===path){link.classList.add('active');isChildActive=!0}});if(isChildActive){if(submenu)submenu.classList.add('show');if(parentLink){parentLink.classList.add('active-parent');parentLink.setAttribute('aria-expanded','true');const icon=parentLink.querySelector('.rotate-icon');if(icon)icon.classList.add('rotated');}}else if(toggleTarget&&toggleTarget.startsWith('#')){const targetID=toggleTarget.slice(1);const termLink=document.querySelector(`.services-nav .nav-link[href="#${targetID}"]`);if(termLink){const termURL=new URL(window.location.origin+'/'+targetID.replace('submenu','')+'/').pathname.replace(/\/+$/,'').toLowerCase();if(path.includes(termURL)&&!isChildActive){parentLink.classList.add('active-parent');parentLink.setAttribute('aria-expanded','false')}}}});document.querySelectorAll('.services-nav > .nav-item > .nav-link:not(.parent-category)').forEach(link=>{const href=link.getAttribute('href');if(!href)return;const testPath=new URL(href,window.location.origin).pathname.replace(/\/+$/,'').toLowerCase();if(testPath===path){link.classList.add('active')}})});document.addEventListener('DOMContentLoaded',function(){const wpAccordions=document.querySelectorAll('.wp-block-details');wpAccordions.forEach(function(detailsElement,index){const summary=detailsElement.querySelector('summary');if(!summary)return;const accordionSection=document.createElement('div');accordionSection.className='accordion-section wp-custom-accordion';accordionSection.dataset.source='details';const titleDiv=document.createElement('div');titleDiv.className='accordion-section-title';titleDiv.setAttribute('data-tab',`#accordion-${index}`);titleDiv.innerHTML=summary.innerHTML;const contentDiv=document.createElement('div');contentDiv.className='accordion-section-content';contentDiv.id=`accordion-${index}`;contentDiv.style.overflow='hidden';contentDiv.style.maxHeight='0';contentDiv.style.transition='max-height 0.3s ease';let nextEl=summary.nextElementSibling;while(nextEl){const next=nextEl.nextElementSibling;contentDiv.appendChild(nextEl);nextEl=next}
accordionSection.appendChild(titleDiv);accordionSection.appendChild(contentDiv);detailsElement.replaceWith(accordionSection);titleDiv.addEventListener('click',function(event){event.stopPropagation();const isOpen=contentDiv.classList.contains('open');document.querySelectorAll('.wp-block-details + .accordion-section .accordion-section-content.open').forEach(function(otherSection){if(otherSection!==contentDiv){otherSection.classList.remove('open');otherSection.style.maxHeight='0'}});if(!isOpen){contentDiv.style.display='block';contentDiv.style.maxHeight='none';const fullHeight=contentDiv.scrollHeight;contentDiv.style.maxHeight='0';contentDiv.style.display='';contentDiv.offsetHeight;contentDiv.classList.add('open');contentDiv.style.maxHeight=fullHeight+'px'}})})})